<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

    
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Communicating better, moving from virtualenv to vagrant/Chef - 's Blog</title>
   <meta name="author" content="" />
   <meta name="google-site-verification" content="kcwqSOIUD45pdwQpCs4vO0hiOumWyJ42j_zp4Oc1eHE" />
   <link rel='me' href='http://www.google.com/profiles/ian.mulvany'>
   <link rel="alternate" type="application/rss+xml" title="partially attended" href="http://partiallyattended.com/atom.xml"/>
   <!-- <link href="http://feeds.feedburner.com/hackerific" rel="alternate" title="Matt Foster" type="application/atom+xml" /> -->

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/app-ca19faaa3640e3ac64195a971a3f3ffd.css">
    <link rel="stylesheet" href="/assets/jasny-bootstrap.min-1f13627da40baafa46480927e9ed7c4f.css">
    <link rel="stylesheet" href="/assets/navmenu-push-48912be81fe1965cbda92ab1404e600b.css">
    <link rel="stylesheet" href="/assets/fluidbox-e2af55dd5c3fecf7aea657fff65eec3f.css">

</head>


<body>


<div class="site">

    <div class="container">



        <div class="row">
          <div class="col-md-8 col-md-offset-2">
            <div class="page-header">
                <div class="title">
    <a class = "banner" href="/">partially-attended</a>
    <a class="extra" href="/">home</a>
    <a class="extra" href="/tags.html">tags</a>
    <a class="extra" href="/about.html">about</a>
  </div>

            </div>
          </div>
        </div>

        <div class="content">
          <div class="row">
            <div class="col-md-8 col-md-offset-2">
              <h1>Communicating better, moving from virtualenv to vagrant/Chef</h1>

<p class="info">Posted on: 23 April 2013

in 
  <a href="/tags.html#python">python</a>,

  <a href="/tags.html#chef">chef</a>,

  <a href="/tags.html#vagrant">vagrant</a>,

  <a href="/tags.html#sysops">sysops</a>,

  <a href="/tags.html#ipython">ipython</a>,

  <a href="/tags.html#development">development</a>,

  <a href="/tags.html#communication">communication</a>


</p>

<div id="post">
<p>I’ve been using <a href="http://www.virtualenv.org/en/latest/">virtualenv</a> for a while, but in the past few months, since taking up the role of head of technology for eLife, I’ve been giving much more thought about how to build scalable development environments. </p>

<p>Ever since I was managing <a href="http://en.wikipedia.org/wiki/Connotea">connotea</a>, one of the biggest pains has been <a href="http://www.mulvany.net/files/README.osx.html">configuration management</a>. I seem to have spent almost more time on configuring environments than on actually doing any development work (disclaimer, I don’t actually do much coding, I usually do more product management, but it’s really useful to know the development pain points). </p>

<p>For sure package installation has gotten a lot easier over the past couple of decades. In the 1990’s I was up to my next in make files, now I usually just <code>pip install</code> something. </p>

<p><a href="http://www.virtualenv.org/en/latest/">virtualenv</a> has been really nice for working with different versions of the same library on the same system, but this week I ran into a problem when trying to make <a href="http://ipython.org/">iPython</a> aware of the packages installed within a virtual environment. The result was an afternoon of faff. </p>

<p>At the same time I’ve been learning about <a href="http://www.vagrantup.com/">vagrant</a>, <a href="http://wiki.opscode.com/display/chef/Chef+Solo">chef</a> and that toolchain. Over the weekend I wondered if it could provide a replacement for virtualenv. After mucking around for a few hours
with <a href="https://github.com/applicationsonline/librarian">librarian</a>, <a href="http://www.vagrantup.com/">Vagrant</a> and <a href="http://wiki.opscode.com/display/chef/Chef+Solo">chef solo</a> I ended with a virtual machine with a number of python packages installed, running an instance of <a href="http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html">iPython Notebook</a> that can be accessed from the host browser via port forwarding. </p>

<p>If you have already have <a href="http://www.vagrantup.com/">Vagrant</a>, <a href="http://wiki.opscode.com/display/chef/Chef+Solo">chef solo</a> and <a href="https://github.com/applicationsonline/librarian">librarian</a> installed you can have it too by following these steps  </p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="err">$</span> <span class="n">git</span> <span class="nb">clone</span> <span class="ss">git</span><span class="p">:</span><span class="sr">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">elifesciences</span><span class="o">/</span><span class="n">elife</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">env</span><span class="o">.</span><span class="n">git</span>
   <span class="err">$</span> <span class="n">cd</span> <span class="n">elife</span><span class="o">-</span><span class="n">template</span><span class="o">-</span><span class="n">env</span>
   <span class="err">$</span> <span class="n">librarian</span><span class="o">-</span><span class="n">chef</span> <span class="n">install</span>
   <span class="err">$</span> <span class="n">vagrant</span> <span class="n">up</span>
   <span class="err">$</span> <span class="n">vagrant</span> <span class="n">ssh</span>
   <span class="err">$</span> <span class="n">ipython</span> <span class="n">notebook</span> <span class="o">--</span><span class="n">ip</span><span class="o">=</span><span class="mi">192</span><span class="o">.</span><span class="mi">168</span><span class="o">.</span><span class="mi">33</span><span class="o">.</span><span class="mi">10</span></code></pre></div>

<p>Then in your host browser open <a href="http://192.168.33.10:8888">http://192.168.33.10:8888</a>. </p>

<p>The <a href="https://github.com/elifesciences/elife-template-env">elife-template-env</a> repo contains a longer description of the setup.</p>

<p>It strikes me that this way forward is a much friendlier way of packaging code. With an upcoming release of Vagrant one would also be able to deploy immediate to AWS. I was chatting to someone last night about good development practices. When we write code in a team we are communicating with other developers. How we decide to package our work is also an act of communication. I think that the vagrant approach has a lot going for it. You take a definite performance hit in setting up the VM on first run , so I’m already planning on upgrading my setup. On the other hand, in principle you get systems that can be shared really painlessly, and on balance that feels like the more important aspect. </p>

<p>It will be interesting to see if the packaged approach also has any hope of uptake in the distribution of scientific research. We are already in discussion with a number of researchers who are interested in this idea, but I’m not sure there enough familiarity with the tools to make it take off super quickly. I’m hopeful though, as the tools are getting easier to use all the time.</p>

</div>






  
   
    
   

  
   
    
   

  
   
    
   

  
   

  
   
    
   

  
   
    
   

  
   



<div id="related">

  <h2>Recently Related By Tag</h2>


 

  

  

  
    
    
     <div id="taglink">
      <a href="/tags.html#python">python</a>

      </div>
       <ul class="posts">
      
        
            <li><span>11 Aug 2014</span> &rarr; <a href="/2014/08/11/pitfalls-of-iPython-for-talk-slides">Some pittfalls in using iPython to generate talk slides</a></li>
        
      
        
      
        
            <li><span>17 Jun 2012</span> &rarr; <a href="/2012/06/17/getting-started-with-fish">Super quick start guide to fluidinfo</a></li>
        
      
        <li>
               
             
                
             
                
                    
                
             
                
             
          
            (<a href="/tags.html#python">9 more with this tag</a>)
          
       
        </li>
       </ul>
  
 

  

  

  
    
    
      
    
     <div id="taglink">
      <a href="/tags.html#chef">chef</a>

      </div>
       <ul class="posts">
      
        
            <li><span>19 Nov 2013</span> &rarr; <a href="/2013/11/19/osx-mavericks-vagrant-librarian">Setting up Vagrant, Librarian-Chef and Vagrant aws plugins on OSX Mavericks.</a></li>
        
      
        
      
        <li>
               
        </li>
       </ul>
  
 

  

  

  
    
    
      
    
     <div id="taglink">
      <a href="/tags.html#vagrant">vagrant</a>

      </div>
       <ul class="posts">
      
        
            <li><span>19 Nov 2013</span> &rarr; <a href="/2013/11/19/osx-mavericks-vagrant-librarian">Setting up Vagrant, Librarian-Chef and Vagrant aws plugins on OSX Mavericks.</a></li>
        
      
        
      
        <li>
               
        </li>
       </ul>
  
 

  

  

  
 

  

  

  
    
    
      
    
     <div id="taglink">
      <a href="/tags.html#ipython">ipython</a>

      </div>
       <ul class="posts">
      
        
            <li><span>11 Aug 2014</span> &rarr; <a href="/2014/08/11/pitfalls-of-iPython-for-talk-slides">Some pittfalls in using iPython to generate talk slides</a></li>
        
      
        
      
        <li>
               
        </li>
       </ul>
  
 

  

  

  
    
    
      
    
     <div id="taglink">
      <a href="/tags.html#development">development</a>

      </div>
       <ul class="posts">
      
        
            <li><span>19 Nov 2013</span> &rarr; <a href="/2013/11/19/osx-mavericks-vagrant-librarian">Setting up Vagrant, Librarian-Chef and Vagrant aws plugins on OSX Mavericks.</a></li>
        
      
        
            <li><span>30 Sep 2013</span> &rarr; <a href="/2013/09/30/cug-agile-ux">Cambridge usability group - UX and agile</a></li>
        
      
        
      
        <li>
               
        </li>
       </ul>
  
 

  

  

  
 






</div>

            </div>
          </div>
        </div>
        <div id="comments" >
<h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'partiallyattended'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

     </div>

    <div class="footer">

        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-91067-5', 'auto');
  ga('send', 'pageview');

</script>



        <!-- Fluidbox https://github.com/terrymun/Fluidbox -->
        <script src="/js/js-yaml.min.js"></script>
        <script src="/js/imagesloaded.pkgd.min.js"></script>
        <script src="/js/jquery.fluidbox.min.js"></script>
        <script type='text/javascript'>
          $(function () {
            $("a").fluidbox();
          });
        </script>

        <!-- Bootstrap -->
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="/js/jasny-bootstrap.min.js"></script>

        <!-- MathJax -->
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </div>

</div>


</body>
</html>
