<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

    
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>science scraping with YQL - 's Blog</title>
   <meta name="author" content="" />
   <meta name="google-site-verification" content="kcwqSOIUD45pdwQpCs4vO0hiOumWyJ42j_zp4Oc1eHE" />
   <link rel='me' href='http://www.google.com/profiles/ian.mulvany'>
   <link rel="alternate" type="application/rss+xml" title="partially attended" href="http://partiallyattended.com/atom.xml"/>
   <!-- <link href="http://feeds.feedburner.com/hackerific" rel="alternate" title="Matt Foster" type="application/atom+xml" /> -->

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- CSS -->
    <link rel="stylesheet" href="/assets/app-ca19faaa3640e3ac64195a971a3f3ffd.css">
    <link rel="stylesheet" href="/assets/jasny-bootstrap.min-1f13627da40baafa46480927e9ed7c4f.css">
    <link rel="stylesheet" href="/assets/navmenu-push-48912be81fe1965cbda92ab1404e600b.css">
    <link rel="stylesheet" href="/assets/fluidbox-e2af55dd5c3fecf7aea657fff65eec3f.css">

</head>


<body>


<div class="site">

    <div class="container">



        <div class="row">
          <div class="col-md-8 col-md-offset-2">
            <div class="page-header">
                <div class="title">
    <a class = "banner" href="/">partially-attended</a>
    <a class="extra" href="/">home</a>
    <a class="extra" href="/tags.html">tags</a>
    <a class="extra" href="/about.html">about</a>
  </div>

            </div>
          </div>
        </div>

        <div class="content">
          <div class="row">
            <div class="col-md-8 col-md-offset-2">
              <h1>science scraping with YQL</h1>

<p class="info">Posted on: 06 September 2010

in 
  <a href="/tags.html#yql">yql</a>,

  <a href="/tags.html#science">science</a>,

  <a href="/tags.html#scripting">scripting</a>,

  <a href="/tags.html#hacking">hacking</a>,

  <a href="/tags.html#cool">cool</a>,

  <a href="/tags.html#solo10">solo10</a>


</p>

<div id="post">
<p>Last Saturday at Science Online London I gave a quick tutorial on <a href="http://developer.yahoo.com/yql/">YQL</a>, and how it might be used to mash up scientific data sets.  Below I list some of the sample queries that I was playing with.  Before you get started with the <a href="http://developer.yahoo.com/yql/console/">console</a> have a look through the documentation.  I got a lot of milage out of the part about <a href="http://developer.yahoo.com/yql/guide/filters.html">filters</a> and <a href="http://developer.yahoo.com/yql/guide/joins.html">joins</a>.  The blog post by Paul Hogan on <a href="http://www.paulhagon.com/blog/2009/12/09/yql-mashups-for-libraries/">using YQL for library maships</a> was also very helpful.</p>

<p>In my presentation I was originally looking at extracing data from a <a href="http://sbr.ipmpipe.org/cgi-bin/sbr/county_info.cgi?date=2010-07-13&amp;pest=soybean_rust&amp;host=All%20Legumes/Kudzu">report on soy bean rust spread</a>.</p>

<p>Here are a few sample queries to get you started</p>

<p>1:</p>

<div class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">html</span> <span class="k">where</span> 
<span class="n">url</span><span class="o">=</span><span class="ss">&quot;http://sbr.ipmpipe.org/cgi-bin/sbr/county_info.cgi?date=2010-07-13&amp;pest=soybean_rust&amp;host=All%20Legumes/Kudzu&quot;</span></code></pre></div>

<p>This query just pulls all of the HML from the page. <a href="http://developer.yahoo.com/yql/console/#h=select%20*%20from%20html%20where%20url%3D%22http%3A//sbr.ipmpipe.org/cgi-bin/sbr/county_info.cgi%3Fdate%3D2010-07-13%26pest%3Dsoybean_rust%26host%3DAll%2520Legumes/Kudzu%22%0">Open in console</a>.</p>

<hr />

<p>2:</p>

<div class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">html</span> <span class="k">where</span> 
<span class="n">url</span><span class="o">=</span><span class="ss">&quot;http://sbr.ipmpipe.org/cgi-bin/sbr/county_info.cgi?date=2010-07-13&amp;pest=soybean_rust&amp;host=All%20Legumes/Kudzu&quot;</span> 
<span class="k">and</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;//table&#39;</span></code></pre></div>

<p>This query extracts only the table element from the page. <a href="http://developer.yahoo.com/yql/console/#h=select%20*%20from%20html%20where%0Aurl%3D%22http%3A//sbr.ipmpipe.org/cgi-bin/sbr/county_info.cgi%3Fdate%3D2010-07-13%26pest%3Dsoybean_rust%26host%3DAll%2520Legumes/Kudzu%22%0Aand%20xpath%3D%27//table%27%0A">Open in console</a>.</p>

<hr />

<p>3:</p>

<div class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">html</span> <span class="k">where</span> 
<span class="n">url</span><span class="o">=</span><span class="ss">&quot;http://sbr.ipmpipe.org/cgi-bin/sbr/county_info.cgi?date=2010-07-13&amp;pest=soybean_rust&amp;host=All%20Legumes/Kudzu&quot;</span> 
<span class="k">and</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;//table/tr/td[2]&#39;</span></code></pre></div>

<p>This query pulls the second item from each row of the table. <a href="http://developer.yahoo.com/yql/console/#h=select%20*%20from%20html%20where%0Aurl%3D%22http%3A//sbr.ipmpipe.org/cgi-bin/sbr/county_info.cgi%3Fdate%3D2010-07-13%26pest%3Dsoybean_rust%26host%3DAll%2520Legumes/Kudzu%22%20and%20xpath%3D%27//table/tr/td%5B2%5D%27">Open in console</a>.</p>

<hr />

<p>4:</p>

<div class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">html</span> <span class="k">where</span> 
<span class="n">url</span><span class="o">=</span><span class="ss">&quot;http://www.mulvany.net/files/ipmsemanticpipe.html&quot;</span> 
<span class="k">and</span> <span class="n">xpath</span><span class="o">=</span><span class="s1">&#39;//table/tr/td[@id=&quot;status&quot; and p=&quot;Confirmed&quot;]/..&#39;</span></code></pre></div>

<p>For this query I copied the table onto my own server and added some basic proto-semantic markup to the column descriptors.  I could then call out specific columns from the table. <a href="http://developer.yahoo.com/yql/console/#h=select%20*%20from%20html%20where%0Aurl%3D%22http%3A//www.mulvany.net/files/ipmsemanticpipe.html%22%0Aand%20xpath%3D%27//table/tr/td%5B@id%3D%22status%22%20and%20p%3D%22Confirmed%22%5D/..%27">Open in console</a>.</p>

<hr />

<p>5:</p>

<div class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">csv</span> <span class="k">WHERE</span> 
<span class="n">url</span><span class="o">=</span><span class="ss">&quot;http://www.mulvany.net/files/ipmpipe.csv&quot;</span> 
<span class="k">and</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;date,place,status&#39;</span>
<span class="k">and</span> <span class="n">status</span><span class="o">=</span><span class="s1">&#39;Confirmed&#39;</span></code></pre></div>

<p>With this query I converted the table into a csv file.  This demonstrates YQLâ€™s ability to query against csv files.  <a href="http://developer.yahoo.com/yql/console/#h=select%20*%20from%20csv%20WHERE%0Aurl%3D%22http%3A//www.mulvany.net/files/ipmpipe.csv%22%0Aand%20columns%3D%27date%2Cplace%2Cstatus%27%0Aand%20status%3D%27Confirmed%27">Open in console</a>.</p>


</div>






  
   
    
   

  
   
    
   

  
   

  
   

  
   
    
   

  
   
    
   



<div id="related">

  <h2>Recently Related By Tag</h2>


 

  

  

  
    
    
      
    
     <div id="taglink">
      <a href="/tags.html#yql">yql</a>

      </div>
       <ul class="posts">
      
        
            <li><span>13 Sep 2010</span> &rarr; <a href="/2010/09/13/slides-from-aps-talk">Slides from APS Talk, August, 2010</a></li>
        
      
        
      
        <li>
               
        </li>
       </ul>
  
 

  

  

  
    
    
     <div id="taglink">
      <a href="/tags.html#science">science</a>

      </div>
       <ul class="posts">
      
        
            <li><span>16 Apr 2014</span> &rarr; <a href="/2014/04/16/a-new-model-of-peer-review-maybe">Trial by public, open peer review and the power of attention.</a></li>
        
      
        
            <li><span>18 Jan 2014</span> &rarr; <a href="/2014/01/18/writelatex-overleaf-launch">WriteLateX/Overleaf launch event at the British Library</a></li>
        
      
        
            <li><span>08 Jan 2014</span> &rarr; <a href="/2014/01/08/advice-on-publishing-online">advice on publishing research online</a></li>
        
      
        <li>
               
             
                
             
                
             
                
             
          
            (<a href="/tags.html#science">18 more with this tag</a>)
          
       
        </li>
       </ul>
  
 

  

  

  
 

  

  

  
 

  

  

  
    
    
     <div id="taglink">
      <a href="/tags.html#cool">cool</a>

      </div>
       <ul class="posts">
      
        
      
        
            <li><span>14 Jul 2008</span> &rarr; <a href="/2008/07/14/live-blogging-from-BarCamp-Cambridge,-Laura-James">live blogging from BarCamp Cambridge, Laura James</a></li>
        
      
        
            <li><span>14 Jul 2008</span> &rarr; <a href="/2008/07/14/live-blogging-from-BarCamp-Cambridge,">live blogging from BarCamp Cambridge,</a></li>
        
      
        <li>
               
             
                
                    
                
             
                
             
                
             
          
            (<a href="/tags.html#cool">7 more with this tag</a>)
          
       
        </li>
       </ul>
  
 

  

  

  
    
    
      
    
     <div id="taglink">
      <a href="/tags.html#solo10">solo10</a>

      </div>
       <ul class="posts">
      
        
            <li><span>07 Sep 2010</span> &rarr; <a href="/2010/09/07/solo10-presentation-slides">Connecting Scientific Resources, Slides</a></li>
        
      
        
      
        
            <li><span>27 Aug 2010</span> &rarr; <a href="/2010/08/27/connecting-scientific-data">Connecting Scientific Resources</a></li>
        
      
        <li>
               
        </li>
       </ul>
  
 






</div>

            </div>
          </div>
        </div>
        <div id="comments" >
<h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'partiallyattended'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

     </div>

    <div class="footer">

        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-91067-5', 'auto');
  ga('send', 'pageview');

</script>



        <!-- Fluidbox https://github.com/terrymun/Fluidbox -->
        <script src="/js/js-yaml.min.js"></script>
        <script src="/js/imagesloaded.pkgd.min.js"></script>
        <script src="/js/jquery.fluidbox.min.js"></script>
        <script type='text/javascript'>
          $(function () {
            $("a").fluidbox();
          });
        </script>

        <!-- Bootstrap -->
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="/js/jasny-bootstrap.min.js"></script>

        <!-- MathJax -->
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </div>

</div>


</body>
</html>
